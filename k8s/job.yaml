apiVersion: batch/v1
kind: Job
metadata:
  name: treasure-job          # <-- top-level metadata.name (required)
  # namespace: demo           # optional; omit if your Harness infra sets the namespace
  labels:
    app: treasure
spec:
  backoffLimit: 0
  template:
    metadata:
      labels:
        app: treasure
    spec:
      restartPolicy: Never
      containers:
        - name: treasure
          image: "<+artifact.image>"          # Harness resolves from your Primary Artifact
          imagePullPolicy: IfNotPresent
          command: ["python", "-c"]
          args:
            - |
              print(r'''
              *******************************************************************************
              ... (ASCII art) ...
              *******************************************************************************
              ''')
              print("Welcome to Treasure Island.")
              print("Your mission is to find the treasure.")
              crossroad = input("You came across a fork on the road! Which way to go? Left or Right. ").lower()
              if crossroad == "right":
                  print("You fell into the hole! You are dead!")
              elif crossroad == "left":
                  print("Good choice. you are moving on.")
                  lake = input("you came into a Lake. Do you swim or wait for the boat? Swim or Wait. ").lower()
                  if lake != "wait":
                      print(" Ops!! An aligator just eat you. You are dead!")
                  else:
                      print("Good choice, you are not fish food!")
                      door = input ("Finally! Arrived to the final obstacle. Which door would you choose, Red, Yellow or Blue? ").lower()
                      if door == "red":
                          print(" You just got burned by fire. You are dead!")
                      elif door == "blue":
                          print("Sorry, there was a bear here and you just got eaten!!.")
                      elif door == "yellow":
                          print("You found the treasure!!! You are the winner!")
                      else:
                          print("Should have picked up the right door! Game Over!")
          env:
            - name: CROSSROAD
              value: "<+pipeline.variables.CROSSROAD>"
            - name: LAKE
              value: "<+pipeline.variables.LAKE>"
            - name: DOOR
              value: "<+pipeline.variables.DOOR>"
              